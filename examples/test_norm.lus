node main() returns (P1: bool);
let
  P1 = 0 <= counter(0);
  check P1;
  --%MAIN;
tel

contract counter_spec (init: int) returns(out: int);
let
   var out1: int = counter_clone(init);
   var out2: int = counter_clone(init);
   (* guarantee out1 <= out; *)
   (* guarantee out2 = out; *)

   guarantee out1 + out2 >= out;
   guarantee out >= 0;
tel

node counter (init : int) returns (out : int);
(*@contract import
  counter_spec(init)
  returns(out);
*)
let

    out = (if init > 0 then init else -1 * init) -> pre out + 1;
tel


node counter_clone (init : int) returns (out : int);
let
    out = (if init > 0 then init else -1 * init) -> pre out + 1;
tel


node counter2 (init : int) returns (out1, out2 : int);
let
    out1 = (if init > 0 then init else -1 * init) -> pre out1 + 1;
    out2 = (if init > 0 then init else -1 * init) -> pre out2 + 1;
tel


node counter3 (init : int) returns (out1, out2, out3 : int);
let
    out1 = (if init > 0 then init else -1 * init) -> pre out1 + 1;
    out2 = (if init > 0 then init else -1 * init) -> pre out2 + 1;
    out3 = (if init > 0 then init else -1 * init) -> pre out3 + 1;
tel